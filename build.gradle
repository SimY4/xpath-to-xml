plugins {
    id 'net.ltgt.errorprone' version '0.0.14' apply false
    id 'ru.vyarus.animalsniffer' version '1.4.4' apply false
    id 'me.champeau.gradle.jmh' version '0.4.7' apply false
}

ext {
    jUnitVersion = '5.2.0'
    mockitoVersion = '2.19.1'
    assertjVersion = '3.10.0'
    errorproneVersion = '2.3.1'
    checkstyleVersion = '8.11'

    def buildTimeAndDate = new Date()
    buildDate = buildTimeAndDate.format("yyyy-MM-dd")
    buildTime = buildTimeAndDate.format("HH:mm:ss.SSSZ")
}

subprojects {
    apply plugin: 'java-library'
    apply plugin: 'me.champeau.gradle.jmh'
    apply from: rootProject.file('gradle/animal-sniffer.gradle')
    apply from: rootProject.file('gradle/check-checkstyle.gradle')
    apply from: rootProject.file('gradle/check-codecoverage.gradle')
    apply from: rootProject.file('gradle/check-errorprone.gradle')
    apply from: rootProject.file('gradle/publish-jar.gradle')
    apply from: rootProject.file('gradle/publish-maven.gradle')

    sourceCompatibility = JavaVersion.VERSION_1_8

    repositories {
        mavenCentral()
    }

    dependencies {
        jmh configurations.testImplementation
    }

    test {
        useJUnitPlatform()
    }

    jmh {
        jmhVersion = '1.21'
    }

}

task wrapper(type: Wrapper) {
    gradleVersion = '4.9'
}
